{
  "name": "BICI Bike Store AI Assistant",
  "agent_id": "{{ELEVENLABS_AGENT_ID}}",
  "language": "en",
  "model": "turbo",
  "voice": {
    "voice_id": "{{ELEVENLABS_VOICE_ID}}",
    "stability": 0.65,
    "similarity_boost": 0.85,
    "speed": 1.0,
    "use_speaker_boost": true
  },
  "conversation_config": {
    "turn_detection": {
      "type": "server_vad",
      "silence_duration": 0.8,
      "detection_threshold": 0.5
    },
    "agent": {
      "first_message": "Hi! I'm Bici's AI assistant. How can I help you with your biking needs today?",
      "language": "en",
      "max_duration": 1800,
      "llm": {
        "model": "gpt-4o",
        "temperature": 0.3,
        "max_tokens": 150
      },
      "tts": {
        "voice_id": "{{ELEVENLABS_VOICE_ID}}",
        "stability": 0.65,
        "similarity_boost": 0.85,
        "speed": 1.0
      }
    }
  },
  "system_prompt": "You are Bici's AI assistant, a friendly and knowledgeable bike store expert serving customers in both English and French.\n\n## BIKE EXPERTISE\n- Specializing in road bikes, mountain bikes, e-bikes, and hybrids\n- Expert in bike repairs, maintenance, and accessories  \n- Knowledgeable about sizing, fitting, and bike selection\n- Current on all store inventory and pricing\n\n## YOUR ROLE\n- Help customers find the perfect bike for their needs\n- Provide accurate information about products and services\n- Book appointments for repairs and bike fittings\n- Check order status and handle customer inquiries\n- Capture lead information for follow-up\n- Transfer to human agents when needed\n\n## CONVERSATION GUIDELINES\n- Be warm, professional, and enthusiastic about biking\n- Ask qualifying questions to understand customer needs\n- Always offer to book appointments or check availability\n- Collect contact information for follow-up\n- Provide specific product recommendations with prices\n- Explain technical concepts in accessible language\n\n## LANGUAGE SUPPORT\n- Detect customer's preferred language (English/French)\n- Switch languages naturally when requested\n- Use appropriate bike terminology in each language\n- Maintain context across language switches\n\n## ESCALATION CRITERIA\nTransfer to human agent when:\n- Customer requests to speak with a person\n- Complex technical repairs beyond basic troubleshooting\n- Price negotiations or custom orders over $1,000\n- Complaints requiring manager intervention\n- Warranty claims or return disputes\n- Any situation requiring managerial approval\n\n## DATA COLLECTION\nCapture for every interaction:\n- Customer name and contact information\n- Bike interest type and budget range\n- Timeline for purchase or service\n- Lead quality score and next steps\n- Call classification and resolution status",
  "dynamic_variables": [
    {
      "name": "customer_name",
      "type": "string",
      "description": "Customer's name from CRM or caller ID lookup",
      "default": "Valued Customer"
    },
    {
      "name": "customer_phone", 
      "type": "string",
      "description": "Customer's phone number (normalized format)",
      "default": ""
    },
    {
      "name": "customer_email",
      "type": "string", 
      "description": "Customer's email address from previous interactions",
      "default": ""
    },
    {
      "name": "customer_tier",
      "type": "string",
      "description": "Customer loyalty tier: VIP, Regular, New",
      "default": "New"
    },
    {
      "name": "previous_purchases",
      "type": "string",
      "description": "JSON string of customer's purchase history",
      "default": "[]"
    },
    {
      "name": "conversation_context",
      "type": "string",
      "description": "Context from previous conversations with this customer",
      "default": "First-time caller"
    },
    {
      "name": "previous_summary",
      "type": "string",
      "description": "Summary of last conversation with customer",
      "default": "No previous interactions"
    },
    {
      "name": "lead_status",
      "type": "string",
      "description": "Current lead status: New, Qualified, Nurturing, Hot",
      "default": "New"
    },
    {
      "name": "interaction_count",
      "type": "string",
      "description": "Total number of interactions with this customer",
      "default": "0"
    },
    {
      "name": "last_contact_date",
      "type": "string",
      "description": "Date of last contact with customer",
      "default": "Never"
    },
    {
      "name": "organization_name",
      "type": "string", 
      "description": "Store name for personalization",
      "default": "Bici Bike Store"
    },
    {
      "name": "organization_id",
      "type": "string",
      "description": "Organization identifier for multi-tenant support",
      "default": ""
    },
    {
      "name": "store_hours",
      "type": "string",
      "description": "Current store hours based on day/season",
      "default": "Mon-Fri 9AM-7PM, Sat-Sun 10AM-6PM"
    },
    {
      "name": "current_promotions",
      "type": "string",
      "description": "Active promotions and sales",
      "default": "Ask about our current bike deals!"
    },
    {
      "name": "caller_type",
      "type": "string",
      "description": "Type of call: inbound, outbound, callback",
      "default": "inbound"
    },
    {
      "name": "call_reason",
      "type": "string",
      "description": "Reason for outbound calls or callback context",
      "default": "general_inquiry"
    },
    {
      "name": "urgency_level",
      "type": "string",
      "description": "Call urgency: low, medium, high, critical",
      "default": "medium"
    },
    {
      "name": "preferred_language",
      "type": "string",
      "description": "Customer's preferred language: en, fr",
      "default": "en"
    }
  ],
  "tools": {
    "system_tools": [
      {
        "name": "end_call",
        "description": "End the conversation gracefully",
        "enabled": true
      },
      {
        "name": "transfer_to_human",
        "description": "Transfer call to human agent with context",
        "enabled": true,
        "destinations": [
          {
            "name": "general_support",
            "number": "{{HUMAN_AGENT_PHONE_1}}",
            "description": "General customer support and sales"
          },
          {
            "name": "technical_support",
            "number": "{{HUMAN_AGENT_PHONE_2}}", 
            "description": "Technical bike repair and maintenance"
          },
          {
            "name": "manager",
            "number": "{{MANAGER_PHONE}}",
            "description": "Manager for complaints and complex issues"
          }
        ]
      },
      {
        "name": "detect_language",
        "description": "Detect and switch to customer's preferred language", 
        "enabled": true,
        "supported_languages": ["en", "fr"]
      },
      {
        "name": "detect_voicemail",
        "description": "Detect if call goes to voicemail and leave appropriate message",
        "enabled": true
      }
    ],
    "server_tools": [
      {
        "name": "check_order_status",
        "description": "Look up customer order status and tracking information",
        "method": "GET",
        "url": "{{BASE_URL}}/api/shopify/orders/lookup",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "identifier": {
            "type": "string",
            "description": "Phone number, email, or order number",
            "required": true
          },
          "identifier_type": {
            "type": "string",
            "description": "Type of identifier: phone, email, order_number",
            "required": true
          }
        }
      },
      {
        "name": "check_product_availability",
        "description": "Check real-time inventory levels for specific bikes",
        "method": "GET", 
        "url": "{{BASE_URL}}/api/shopify/inventory/{product_handle}",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "product_handle": {
            "type": "string",
            "description": "Shopify product handle or SKU",
            "required": true
          },
          "variant_options": {
            "type": "object",
            "description": "Size, color, or other variant options",
            "required": false
          }
        }
      },
      {
        "name": "get_product_recommendations",
        "description": "Get personalized bike recommendations based on customer profile",
        "method": "POST",
        "url": "{{BASE_URL}}/api/recommendations/bikes",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "customer_profile": {
            "type": "object", 
            "description": "Customer preferences and requirements",
            "required": true
          },
          "budget_range": {
            "type": "object",
            "description": "Min and max budget",
            "required": false
          }
        }
      },
      {
        "name": "get_store_information",
        "description": "Get current store hours, location, and policies",
        "method": "GET",
        "url": "{{BASE_URL}}/api/store/info",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "info_type": {
            "type": "string",
            "description": "Type of information: hours, location, policies, contact",
            "required": true
          }
        }
      },
      {
        "name": "search_customer",
        "description": "Search for existing customer in CRM by phone or email",
        "method": "POST",
        "url": "{{BASE_URL}}/api/crm/customers/search",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "query": {
            "type": "string",
            "description": "Phone number or email to search",
            "required": true
          },
          "query_type": {
            "type": "string",
            "description": "Type of search: phone, email",
            "required": true
          }
        }
      },
      {
        "name": "check_appointment_availability",
        "description": "Check available appointment slots for services",
        "method": "GET",
        "url": "{{BASE_URL}}/api/calendar/availability",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "service_type": {
            "type": "string",
            "description": "Type of service: tune_up, repair, bike_fitting, consultation",
            "required": true
          },
          "preferred_date": {
            "type": "string",
            "description": "Preferred date in YYYY-MM-DD format",
            "required": false
          },
          "duration": {
            "type": "integer",
            "description": "Appointment duration in minutes",
            "required": false
          }
        }
      },
      {
        "name": "book_appointment",
        "description": "Book a service appointment for the customer",
        "method": "POST",
        "url": "{{BASE_URL}}/api/calendar/appointments",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "customer_name": {
            "type": "string",
            "description": "Customer's full name",
            "required": true
          },
          "customer_phone": {
            "type": "string",
            "description": "Customer's phone number",
            "required": true
          },
          "customer_email": {
            "type": "string",
            "description": "Customer's email address",
            "required": true
          },
          "service_type": {
            "type": "string",
            "description": "Type of service being booked",
            "required": true
          },
          "appointment_datetime": {
            "type": "string",
            "description": "Appointment date and time in ISO format",
            "required": true
          },
          "notes": {
            "type": "string",
            "description": "Additional notes or special requests",
            "required": false
          }
        }
      },
      {
        "name": "create_lead",
        "description": "Create a new lead record with customer information",
        "method": "POST",
        "url": "{{BASE_URL}}/api/crm/leads",
        "authentication": {
          "type": "bearer_token",
          "token": "{{API_SECRET_TOKEN}}"
        },
        "parameters": {
          "lead_data": {
            "type": "object",
            "description": "Complete lead information including contact details and interests",
            "required": true
          }
        }
      }
    ],
    "client_tools": [
      {
        "name": "update_customer_display",
        "description": "Update customer information display on agent dashboard",
        "parameters": {
          "customer_data": {
            "type": "object",
            "description": "Customer information to display",
            "required": true
          },
          "action": {
            "type": "string",
            "description": "Display action: show, highlight, update",
            "required": true
          }
        }
      },
      {
        "name": "show_product_recommendation",
        "description": "Display product recommendations on agent dashboard",
        "parameters": {
          "products": {
            "type": "array",
            "description": "Array of recommended products",
            "required": true
          },
          "reason": {
            "type": "string", 
            "description": "Reason for recommendation",
            "required": true
          }
        }
      },
      {
        "name": "trigger_follow_up_action",
        "description": "Schedule automated follow-up actions",
        "parameters": {
          "action_type": {
            "type": "string",
            "description": "Type of follow-up: email, sms, call, appointment_reminder",
            "required": true
          },
          "delay_minutes": {
            "type": "integer",
            "description": "Minutes to wait before executing action",
            "required": true
          },
          "message_template": {
            "type": "string",
            "description": "Template for follow-up message",
            "required": false
          }
        }
      },
      {
        "name": "update_conversation_notes",
        "description": "Update real-time conversation notes in dashboard",
        "parameters": {
          "notes": {
            "type": "string",
            "description": "Conversation notes and key points",
            "required": true
          },
          "classification": {
            "type": "string",
            "description": "Call classification: sales, support, service, complaint",
            "required": true
          }
        }
      },
      {
        "name": "show_call_analytics",
        "description": "Display real-time call analytics and metrics",
        "parameters": {
          "metrics": {
            "type": "object",
            "description": "Analytics data to display",
            "required": true
          }
        }
      }
    ]
  },
  "knowledge_base": {
    "enabled": true,
    "rag_config": {
      "usage_mode": "auto",
      "retrieval_count": 5,
      "similarity_threshold": 0.7,
      "embedding_model": "text-embedding-3-small",
      "chunk_size": 800,
      "overlap": 150
    },
    "files": [
      "store-hours-locations-policies.md",
      "return-exchange-warranty-policies.pdf", 
      "contact-information-directions.txt",
      "bike-catalog-2024-complete.pdf",
      "electric-bikes-specifications.pdf",
      "accessories-catalog.pdf",
      "sizing-guide-comprehensive.pdf",
      "repair-services-pricing.pdf",
      "tune-up-maintenance-packages.pdf",
      "appointment-types-duration.md",
      "frequently-asked-questions.md",
      "bike-selection-guide.pdf",
      "maintenance-tips-seasonal.md"
    ]
  },
  "bilingual_support": {
    "enabled": true,
    "supported_languages": ["en", "fr"],
    "auto_detect": true,
    "language_configs": {
      "en": {
        "first_message": "Hi! I'm Bici's AI assistant. How can I help you with your biking needs today?",
        "system_prompt_suffix": "\nRespond in English unless the customer speaks French.",
        "vocabulary": {
          "mountain bike": "mountain bike",
          "road bike": "road bike",
          "e-bike": "electric bike",
          "tune-up": "tune-up", 
          "repair": "repair",
          "appointment": "appointment"
        }
      },
      "fr": {
        "first_message": "Bonjour! Je suis l'assistant IA de Bici. Comment puis-je vous aider avec vos besoins de vélo aujourd'hui?",
        "system_prompt_suffix": "\nRépondez en français. Utilisez la terminologie française appropriée pour les vélos.",
        "vocabulary": {
          "mountain bike": "vélo de montagne",
          "road bike": "vélo de route", 
          "e-bike": "vélo électrique",
          "tune-up": "mise au point",
          "repair": "réparation",
          "appointment": "rendez-vous"
        }
      }
    }
  },
  "performance_settings": {
    "response_timeout": 10000,
    "max_conversation_duration": 1800,
    "silence_timeout": 5000,
    "interruption_threshold": 0.7,
    "context_preservation": true,
    "call_recording": true,
    "analytics_enabled": true
  },
  "security": {
    "signed_url_required": true,
    "allowlist_enabled": true,
    "rate_limiting": {
      "calls_per_minute": 100,
      "calls_per_hour": 1000
    },
    "encryption": {
      "audio_encryption": true,
      "data_encryption": true
    }
  }
}